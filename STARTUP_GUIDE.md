# å®‰å…¨å‘Šè­¦åˆ†æç³»ç»Ÿ - ä¸€é”®å¯åŠ¨è§£å†³æ–¹æ¡ˆ

## æ¦‚è¿°

æœ¬è§£å†³æ–¹æ¡ˆæä¾›äº†ä¸€å¥—å®Œæ•´çš„å®‰å…¨å‘Šè­¦åˆ†æç³»ç»Ÿç®¡ç†è„šæœ¬ï¼Œå®ç°äº†ç³»ç»Ÿçš„ä¸€é”®å¯åŠ¨ã€åœæ­¢ã€çŠ¶æ€ç›‘æ§å’Œç»´æŠ¤åŠŸèƒ½ã€‚

## è„šæœ¬åŠŸèƒ½

### ğŸš€ ä¸»è¦ç®¡ç†è„šæœ¬

#### 1. `manage.sh` - ç»Ÿä¸€ç®¡ç†å…¥å£
è¿™æ˜¯ç³»ç»Ÿçš„ä¸»è¦ç®¡ç†å…¥å£ï¼Œæä¾›äº†æ‰€æœ‰å¸¸ç”¨æ“ä½œçš„ç»Ÿä¸€æ¥å£ã€‚

**åŸºæœ¬ç”¨æ³•:**
```bash
./manage.sh [å‘½ä»¤] [é€‰é¡¹]
```

**ä¸»è¦å‘½ä»¤:**
- `start` - å¯åŠ¨æ•´ä¸ªç³»ç»Ÿ
- `stop` - åœæ­¢æ•´ä¸ªç³»ç»Ÿ  
- `restart` - é‡å¯æ•´ä¸ªç³»ç»Ÿ
- `status` - æ£€æŸ¥ç³»ç»ŸçŠ¶æ€

**ä½¿ç”¨ç¤ºä¾‹:**
```bash
./manage.sh start          # å¯åŠ¨ç³»ç»Ÿ
./manage.sh status         # æ£€æŸ¥çŠ¶æ€
./manage.sh logs elasticsearch  # æŸ¥çœ‹ESæ—¥å¿—
./manage.sh restart        # é‡å¯ç³»ç»Ÿ
```

#### 2. `one_click_start.sh` - ä¸€é”®å¯åŠ¨è„šæœ¬
å®Œæ•´çš„ç³»ç»Ÿå¯åŠ¨è„šæœ¬ï¼ŒåŒ…å«æ‰€æœ‰å¿…è¦çš„æ£€æŸ¥å’Œé…ç½®ã€‚

**ä¸»è¦åŠŸèƒ½:**
- âœ… ç³»ç»Ÿç¯å¢ƒæ£€æŸ¥ï¼ˆDockerã€Pythonã€èµ„æºç­‰ï¼‰
- âœ… è‡ªåŠ¨ä¿®å¤å¸¸è§é—®é¢˜
- âœ… åŸºç¡€è®¾æ–½æœåŠ¡å¯åŠ¨
- âœ… æœåŠ¡å¥åº·æ£€æŸ¥
- âœ… APIæœåŠ¡å¯åŠ¨
- âœ… ç›‘æ§é¢æ¿åˆ›å»º
- âœ… è¯¦ç»†çš„å¯åŠ¨æ—¥å¿—

**ä½¿ç”¨æ–¹æ³•:**
```bash
./one_click_start.sh
```

#### 3. `stop_system.sh` - ç³»ç»Ÿåœæ­¢è„šæœ¬
å®‰å…¨åœ°åœæ­¢æ‰€æœ‰ç³»ç»ŸæœåŠ¡ã€‚

**ä¸»è¦åŠŸèƒ½:**
- ğŸ›‘ ä¼˜é›…åœæ­¢APIæœåŠ¡
- ğŸ›‘ åœæ­¢Dockerå®¹å™¨
- ğŸ§¹ æ¸…ç†ç›¸å…³è¿›ç¨‹
- ğŸ”Œ é‡Šæ”¾å ç”¨ç«¯å£
- ğŸ’¾ è‡ªåŠ¨å¤‡ä»½é…ç½®
- ğŸ“Š ç”Ÿæˆåœæ­¢æŠ¥å‘Š

**ä½¿ç”¨æ–¹æ³•:**
```bash
./stop_system.sh
```

#### 4. `status_check.sh` - çŠ¶æ€æ£€æŸ¥è„šæœ¬
å…¨é¢çš„ç³»ç»ŸçŠ¶æ€æ£€æŸ¥å’Œç›‘æ§ã€‚

**ä¸»è¦åŠŸèƒ½:**
- ğŸŒ APIæœåŠ¡çŠ¶æ€æ£€æŸ¥
- ğŸ³ DockeræœåŠ¡çŠ¶æ€æ£€æŸ¥
- ğŸ”— HTTPç«¯ç‚¹å¥åº·æ£€æŸ¥
- ğŸ—„ï¸ æ•°æ®åº“è¿æ¥æµ‹è¯•
- ğŸ“Š ç³»ç»Ÿèµ„æºç›‘æ§
- ğŸ“‹ æ—¥å¿—æ–‡ä»¶æ£€æŸ¥
- ğŸ”’ å®‰å…¨é…ç½®æ£€æŸ¥

**ä½¿ç”¨æ–¹æ³•:**
```bash
./status_check.sh           # å®Œæ•´æ£€æŸ¥
./status_check.sh --brief   # ç®€è¦ä¿¡æ¯
./status_check.sh --json    # JSONæ ¼å¼è¾“å‡º
./status_check.sh --api     # ä»…æ£€æŸ¥API
```

## ç³»ç»Ÿæ¶æ„

### æ ¸å¿ƒç»„ä»¶
- **Elasticsearch** - æ—¥å¿—æœç´¢å’Œåˆ†æ
- **Kibana** - æ•°æ®å¯è§†åŒ–
- **Neo4j** - å›¾æ•°æ®åº“
- **ClickHouse** - åˆ†ææ•°æ®åº“
- **MySQL** - å…³ç³»æ•°æ®åº“
- **Redis** - ç¼“å­˜ç³»ç»Ÿ
- **Kafka** - æ¶ˆæ¯é˜Ÿåˆ—
- **Flink** - æµå¤„ç†

### æœåŠ¡ç«¯å£
| æœåŠ¡ | ç«¯å£ | ç”¨é€” |
|------|------|------|
| APIæœåŠ¡ | 8000 | RESTful API |
| Kibana | 5601 | æ•°æ®å¯è§†åŒ– |
| Neo4j | 7474 | å›¾æ•°æ®åº“ç®¡ç† |
| ClickHouse | 8123 | æ•°æ®åˆ†æ |
| Elasticsearch | 9200 | æœç´¢å¼•æ“ |
| MySQL | 3307 | å…³ç³»æ•°æ®åº“ |
| Redis | 6380 | ç¼“å­˜æœåŠ¡ |
| Kafka | 9092 | æ¶ˆæ¯é˜Ÿåˆ— |
| Kafka UI | 8082 | Kafkaç®¡ç†ç•Œé¢ |

## å¿«é€Ÿå¼€å§‹

### 1. ç³»ç»Ÿè¦æ±‚
- **æ“ä½œç³»ç»Ÿ**: macOS/Linux
- **å†…å­˜**: å»ºè®®8GBä»¥ä¸Š
- **ç£ç›˜ç©ºé—´**: å»ºè®®50GBä»¥ä¸Š
- **è½¯ä»¶ä¾èµ–**: Docker, Docker Compose, Python3

### 2. å®‰è£…å’Œå¯åŠ¨
```bash
# å…‹éš†é¡¹ç›®ï¼ˆå¦‚æœéœ€è¦ï¼‰
git clone <repository-url>
cd security-platform

# ä¸€é”®å¯åŠ¨ç³»ç»Ÿ
./manage.sh start

# æˆ–è€…ç›´æ¥ä½¿ç”¨
./one_click_start.sh
```

### 3. éªŒè¯å®‰è£…
```bash
# æ£€æŸ¥ç³»ç»ŸçŠ¶æ€
./manage.sh status

# æµ‹è¯•APIæ¥å£
curl -X POST "http://localhost:8000/api/v1/analyze/event" \
  -H "Content-Type: application/json" \
  -d '{
    "event_type": "security_test",
    "log_data": {
      "src_ip": "192.168.1.100",
      "username": "test_user",
      "timestamp": "'$(date -u +%Y-%m-%dT%H:%M:%S.%3NZ)'"
    }
  }'
```

### 4. è®¿é—®ç³»ç»Ÿ
- **APIæœåŠ¡**: http://localhost:8000
- **APIæ–‡æ¡£**: http://localhost:8000/docs
- **Kibana**: http://localhost:5601
- **Neo4j**: http://localhost:7474 (neo4j/security123)
- **ClickHouse**: http://localhost:8123/play (admin/security123)
- **Kafka UI**: http://localhost:8082

## è¿ç»´ç®¡ç†

### æ—¥å¸¸æ“ä½œ
```bash
# æŸ¥çœ‹ç³»ç»ŸçŠ¶æ€
./manage.sh status

# æŸ¥çœ‹æœåŠ¡æ—¥å¿—
./manage.sh logs
./manage.sh logs elasticsearch

# é‡å¯ç‰¹å®šæœåŠ¡
docker-compose restart elasticsearch

# åœæ­¢ç³»ç»Ÿ
./manage.sh stop
```

### æ•…éšœæ’æŸ¥
```bash
# æ£€æŸ¥è¯¦ç»†çŠ¶æ€
./status_check.sh

# æŸ¥çœ‹å¯åŠ¨æ—¥å¿—
tail -f logs/startup_*.log

# æŸ¥çœ‹APIæ—¥å¿—
./manage.sh logs-api

# æ£€æŸ¥DockeræœåŠ¡
docker-compose ps
docker-compose logs [æœåŠ¡å]
```

### ç³»ç»Ÿç»´æŠ¤
```bash
# å¤‡ä»½é…ç½®
./manage.sh backup

# æ›´æ–°é•œåƒ
./manage.sh update

# æ¸…ç†ç³»ç»Ÿ
./manage.sh clean

# æ·±åº¦æ¸…ç†ï¼ˆåŒ…æ‹¬æ•°æ®ï¼‰
./manage.sh clean-all
```

## é«˜çº§åŠŸèƒ½

### 1. è‡ªåŠ¨åŒ–ç›‘æ§
ç³»ç»Ÿä¼šè‡ªåŠ¨åˆ›å»ºç›‘æ§é¢æ¿æ–‡ä»¶ `monitoring_dashboard.html`ï¼Œæä¾›å¯è§†åŒ–çš„ç³»ç»ŸçŠ¶æ€ç›‘æ§ã€‚

### 2. æ—¥å¿—ç®¡ç†
- æ‰€æœ‰æ“ä½œæ—¥å¿—ä¿å­˜åœ¨ `logs/` ç›®å½•
- æ”¯æŒæ—¥å¿—è½®è½¬å’Œå‹ç¼©
- æä¾›ç»“æ„åŒ–çš„JSONçŠ¶æ€æŠ¥å‘Š

### 3. é”™è¯¯æ¢å¤
- è‡ªåŠ¨æ£€æµ‹å’Œä¿®å¤å¸¸è§é—®é¢˜
- æ™ºèƒ½é‡è¯•æœºåˆ¶
- æœåŠ¡ä¾èµ–ç®¡ç†

### 4. å®‰å…¨é…ç½®
- é»˜è®¤ä½¿ç”¨æœ¬åœ°è®¿é—®
- å¯é…ç½®çš„è®¤è¯ä¿¡æ¯
- æ–‡ä»¶æƒé™æ£€æŸ¥

## è‡ªå®šä¹‰é…ç½®

### ç¯å¢ƒå˜é‡
å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡è‡ªå®šä¹‰ç³»ç»Ÿè¡Œä¸ºï¼š

```bash
export COMPOSE_PROJECT_NAME="my-security-system"
export API_PORT=8080
export LOG_LEVEL=DEBUG
```

### é…ç½®æ–‡ä»¶
ä¸»è¦é…ç½®æ–‡ä»¶ï¼š
- `docker-compose.yml` - DockeræœåŠ¡é…ç½®
- `requirements.txt` - Pythonä¾èµ–
- `config/` - å„æœåŠ¡çš„é…ç½®æ–‡ä»¶

## æ•…éšœæ’æŸ¥æŒ‡å—

### å¸¸è§é—®é¢˜

1. **ç«¯å£å†²çª**
   ```bash
   # æ£€æŸ¥ç«¯å£å ç”¨
   lsof -i :8000
   # æ€æ­»å ç”¨è¿›ç¨‹
   kill -9 <PID>
   ```

2. **å†…å­˜ä¸è¶³**
   ```bash
   # æ£€æŸ¥å†…å­˜ä½¿ç”¨
   ./status_check.sh
   # è°ƒæ•´Dockerå†…å­˜é™åˆ¶
   ```

3. **æœåŠ¡å¯åŠ¨å¤±è´¥**
   ```bash
   # æŸ¥çœ‹å…·ä½“é”™è¯¯
   docker-compose logs [æœåŠ¡å]
   # é‡å¯å•ä¸ªæœåŠ¡
   docker-compose restart [æœåŠ¡å]
   ```

4. **æ•°æ®åº“è¿æ¥å¤±è´¥**
   ```bash
   # æ£€æŸ¥æ•°æ®åº“çŠ¶æ€
   ./status_check.sh --brief
   # é‡ç½®æ•°æ®åº“
   docker-compose restart mysql redis
   ```

### è·å–å¸®åŠ©
```bash
# æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯
./manage.sh help

# æŸ¥çœ‹è„šæœ¬é€‰é¡¹
./status_check.sh --help
```

## å¼€å‘å’Œæ‰©å±•

### æ·»åŠ æ–°æœåŠ¡
1. åœ¨ `docker-compose.yml` ä¸­æ·»åŠ æœåŠ¡å®šä¹‰
2. æ›´æ–° `one_click_start.sh` ä¸­çš„æœåŠ¡åˆ—è¡¨
3. åœ¨ `status_check.sh` ä¸­æ·»åŠ å¥åº·æ£€æŸ¥

### è‡ªå®šä¹‰æ£€æŸ¥é¡¹
åœ¨ `status_check.sh` ä¸­æ·»åŠ æ–°çš„æ£€æŸ¥å‡½æ•°ï¼š

```bash
check_custom_service() {
    print_section "ğŸ”§ è‡ªå®šä¹‰æœåŠ¡æ£€æŸ¥"
    # æ·»åŠ æ£€æŸ¥é€»è¾‘
    check_status "PASS" "è‡ªå®šä¹‰æœåŠ¡è¿è¡Œæ­£å¸¸"
}
```

## ç‰ˆæœ¬å†å²

- **v2.0** - å®Œæ•´çš„ç®¡ç†è„šæœ¬å¥—ä»¶
- **v1.0** - åŸºç¡€å¯åŠ¨è„šæœ¬

## è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. æäº¤æ›´æ”¹
4. åˆ›å»º Pull Request

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚

## è”ç³»æ”¯æŒ

å¦‚é‡é—®é¢˜ï¼Œè¯·ï¼š
1. æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶
2. è¿è¡ŒçŠ¶æ€æ£€æŸ¥
3. æäº¤Issue
4. è”ç³»æŠ€æœ¯æ”¯æŒ

---

**æ³¨æ„**: æœ¬è„šæœ¬å¥—ä»¶ä¸“ä¸ºå®‰å…¨åˆ†æç³»ç»Ÿè®¾è®¡ï¼Œè¯·åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨å‰è¿›è¡Œå……åˆ†æµ‹è¯•ã€‚