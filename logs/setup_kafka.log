📨 配置Kafka主题...
⏳ 等待Kafka服务启动...
✅ Kafka服务已就绪

🏗️  创建安全分析主题...
创建主题: security-raw-logs
   主题 security-raw-logs 已存在，跳过创建
创建主题: security-events
   主题 security-events 已存在，跳过创建
创建主题: security-entities
   主题 security-entities 已存在，跳过创建
创建主题: security-risk-scores
   主题 security-risk-scores 已存在，跳过创建
创建主题: security-alerts
   主题 security-alerts 已存在，跳过创建
创建主题: security-responses
   主题 security-responses 已存在，跳过创建
创建主题: security-monitoring
   主题 security-monitoring 已存在，跳过创建
创建主题: security-dead-letter
   主题 security-dead-letter 已存在，跳过创建

📊 验证主题创建...
📋 主题列表:
   ✅ security-alerts
   ✅ security-dead-letter
   ✅ security-entities
   ✅ security-events
   ✅ security-monitoring
   ✅ security-raw-logs
   ✅ security-responses
   ✅ security-risk-scores

🔍 主题详细信息:

📄 主题: security-raw-logs
   Topic: security-raw-logs	TopicId: nmHdxfTySb6vVVdCY3cJSQ	PartitionCount: 6	ReplicationFactor: 1	Configs: compression.type=gzip,retention.ms=604800000
   	Topic: security-raw-logs	Partition: 0	Leader: 1	Replicas: 1	Isr: 1
   	Topic: security-raw-logs	Partition: 1	Leader: 1	Replicas: 1	Isr: 1
   	Topic: security-raw-logs	Partition: 2	Leader: 1	Replicas: 1	Isr: 1
   	Topic: security-raw-logs	Partition: 3	Leader: 1	Replicas: 1	Isr: 1
   	Topic: security-raw-logs	Partition: 4	Leader: 1	Replicas: 1	Isr: 1
   	Topic: security-raw-logs	Partition: 5	Leader: 1	Replicas: 1	Isr: 1

📄 主题: security-events
   Topic: security-events	TopicId: LHvrlppzRceFzyG5HMRcFQ	PartitionCount: 6	ReplicationFactor: 1	Configs: compression.type=gzip,retention.ms=2592000000
   	Topic: security-events	Partition: 0	Leader: 1	Replicas: 1	Isr: 1
   	Topic: security-events	Partition: 1	Leader: 1	Replicas: 1	Isr: 1
   	Topic: security-events	Partition: 2	Leader: 1	Replicas: 1	Isr: 1
   	Topic: security-events	Partition: 3	Leader: 1	Replicas: 1	Isr: 1
   	Topic: security-events	Partition: 4	Leader: 1	Replicas: 1	Isr: 1
   	Topic: security-events	Partition: 5	Leader: 1	Replicas: 1	Isr: 1

📄 主题: security-entities
   Topic: security-entities	TopicId: VOXe2ZWnQJOH9HzpkOolSQ	PartitionCount: 4	ReplicationFactor: 1	Configs: compression.type=gzip,retention.ms=2592000000
   	Topic: security-entities	Partition: 0	Leader: 1	Replicas: 1	Isr: 1
   	Topic: security-entities	Partition: 1	Leader: 1	Replicas: 1	Isr: 1
   	Topic: security-entities	Partition: 2	Leader: 1	Replicas: 1	Isr: 1
   	Topic: security-entities	Partition: 3	Leader: 1	Replicas: 1	Isr: 1

📄 主题: security-risk-scores
   Topic: security-risk-scores	TopicId: CrPgqFZVRGSM6agoRnKPog	PartitionCount: 4	ReplicationFactor: 1	Configs: compression.type=gzip,retention.ms=2592000000
   	Topic: security-risk-scores	Partition: 0	Leader: 1	Replicas: 1	Isr: 1
   	Topic: security-risk-scores	Partition: 1	Leader: 1	Replicas: 1	Isr: 1
   	Topic: security-risk-scores	Partition: 2	Leader: 1	Replicas: 1	Isr: 1
   	Topic: security-risk-scores	Partition: 3	Leader: 1	Replicas: 1	Isr: 1

📄 主题: security-alerts
   Topic: security-alerts	TopicId: YDyruOuZSja1jnHjjsGMAQ	PartitionCount: 3	ReplicationFactor: 1	Configs: compression.type=gzip,retention.ms=7776000000
   	Topic: security-alerts	Partition: 0	Leader: 1	Replicas: 1	Isr: 1
   	Topic: security-alerts	Partition: 1	Leader: 1	Replicas: 1	Isr: 1
   	Topic: security-alerts	Partition: 2	Leader: 1	Replicas: 1	Isr: 1

📄 主题: security-responses
   Topic: security-responses	TopicId: mCpQIsvvR-qgbDz8uMqjqg	PartitionCount: 3	ReplicationFactor: 1	Configs: compression.type=gzip,retention.ms=2592000000
   	Topic: security-responses	Partition: 0	Leader: 1	Replicas: 1	Isr: 1
   	Topic: security-responses	Partition: 1	Leader: 1	Replicas: 1	Isr: 1
   	Topic: security-responses	Partition: 2	Leader: 1	Replicas: 1	Isr: 1

📄 主题: security-monitoring
   Topic: security-monitoring	TopicId: G5tle2GeS4ODL0Rx9Or15Q	PartitionCount: 2	ReplicationFactor: 1	Configs: compression.type=gzip,retention.ms=259200000
   	Topic: security-monitoring	Partition: 0	Leader: 1	Replicas: 1	Isr: 1
   	Topic: security-monitoring	Partition: 1	Leader: 1	Replicas: 1	Isr: 1

📄 主题: security-dead-letter
   Topic: security-dead-letter	TopicId: d91-EKtlRqK0j7jK-YffTA	PartitionCount: 2	ReplicationFactor: 1	Configs: compression.type=gzip,retention.ms=7776000000
   	Topic: security-dead-letter	Partition: 0	Leader: 1	Replicas: 1	Isr: 1
   	Topic: security-dead-letter	Partition: 1	Leader: 1	Replicas: 1	Isr: 1

🧪 测试消息生产和消费...
📤 发送测试消息到 security-events...
   ✅ 测试消息已发送

📥 从 security-events 消费消息（超时10秒）...
{

📈 主题偏移量信息:
   security-events:0:0
   security-events:1:11
   security-events:2:11
   security-events:3:0
   security-events:4:0

✅ Kafka主题配置完成！

🎯 Kafka访问信息：
   - Bootstrap Server: localhost:9092
   - Kafka UI: http://localhost:8082
   - JMX Port: 9101

📊 已创建的主题：
   - security-raw-logs: 原始日志（6分区）
   - security-events: 安全事件（6分区）
   - security-entities: 实体数据（4分区）
   - security-risk-scores: 风险评分（4分区）
   - security-alerts: 安全告警（3分区）
   - security-responses: 响应动作（3分区）
   - security-monitoring: 系统监控（2分区）
   - security-dead-letter: 死信队列（2分区）
